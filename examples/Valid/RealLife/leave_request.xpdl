<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<xpdl:Package xmlns:xpdl="http://www.wfmc.org/2002/XPDL1.0" xmlns="http://www.wfmc.org/2002/XPDL1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Id="leave_request" Name="Leave request" xsi:schemaLocation="http://www.wfmc.org/2002/XPDL1.0 http://wfmc.org/standards/docs/TC-1025_schema_10_xpdl.xsd">
    <xpdl:PackageHeader>
        <xpdl:XPDLVersion>1.0</xpdl:XPDLVersion>
        <xpdl:Vendor>(c) Together Teamsolutions Co., Ltd.</xpdl:Vendor>
        <xpdl:Created>2010-09-11 08:11:51</xpdl:Created>
        <xpdl:Description>Package contains process definitions for handling leave requests.</xpdl:Description>
    </xpdl:PackageHeader>
    <xpdl:RedefinableHeader PublicationStatus="UNDER_TEST"/>
    <xpdl:ConformanceClass GraphConformance="NON_BLOCKED"/>
    <xpdl:Script Type="text/javascript"/>
    <xpdl:TypeDeclarations>
        <xpdl:TypeDeclaration Id="map" Name="Map">
            <xpdl:ExternalReference location="java.util.HashMap"/>
        </xpdl:TypeDeclaration>
    </xpdl:TypeDeclarations>
    <xpdl:Participants>
        <xpdl:Participant Id="employee" Name="Employee">
            <xpdl:ParticipantType Type="ROLE"/>
        </xpdl:Participant>
        <xpdl:Participant Id="supervisor" Name="Supervisor">
            <xpdl:ParticipantType Type="ROLE"/>
        </xpdl:Participant>
        <xpdl:Participant Id="personnel_department" Name="Personnel department">
            <xpdl:ParticipantType Type="ORGANIZATIONAL_UNIT"/>
        </xpdl:Participant>
        <xpdl:Participant Id="system" Name="System">
            <xpdl:ParticipantType Type="SYSTEM"/>
        </xpdl:Participant>
    </xpdl:Participants>
    <xpdl:Applications>
        <xpdl:Application Id="check_leave_days" Name="Check leave days">
            <xpdl:FormalParameters>
                <xpdl:FormalParameter Id="dateFrom" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="DATETIME"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="dateTo" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="DATETIME"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="balance" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="accepted" Mode="OUT">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="diffDays" Mode="OUT">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
            </xpdl:FormalParameters>
            <xpdl:ExtendedAttributes>
                <xpdl:ExtendedAttribute Name="ToolAgentClass" Value="org.enhydra.shark.toolagent.JavaScriptToolAgent"/>
                <xpdl:ExtendedAttribute Name="Script" Value="accepted=false;&#10;var diffms=dateTo.getTime()-dateFrom.getTime();&#10;if (diffms&gt;0) {&#10; diffDays=diffms/(24*60*60*1000);&#10; if (diffDays&lt;=balance) {&#10;  accepted=true;&#10; }&#10;}"/>
            </xpdl:ExtendedAttributes>
        </xpdl:Application>
        <xpdl:Application Id="deduct_leave_balance" Name="Deduct leave balance">
            <xpdl:FormalParameters>
                <xpdl:FormalParameter Id="map" Mode="INOUT">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="map"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="personalID" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="numOfDays" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
            </xpdl:FormalParameters>
            <xpdl:ExtendedAttributes>
                <xpdl:ExtendedAttribute Name="ToolAgentClass" Value="org.enhydra.shark.toolagent.BshToolAgent"/>
                <xpdl:ExtendedAttribute Name="Script" Value="java.lang.Long l=(java.lang.Long)map.get(personalID);&#10;l=new java.lang.Long(l.longValue()-numOfDays.longValue());&#10;map.put(personalID,l);"/>
            </xpdl:ExtendedAttributes>
        </xpdl:Application>
        <xpdl:Application Id="get_leave_balance" Name="Get leave balance">
            <xpdl:FormalParameters>
                <xpdl:FormalParameter Id="map" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="map"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="personalID" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="leaveBalance" Mode="OUT">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
            </xpdl:FormalParameters>
            <xpdl:ExtendedAttributes>
                <xpdl:ExtendedAttribute Name="ToolAgentClass" Value="org.enhydra.shark.toolagent.BshToolAgent"/>
                <xpdl:ExtendedAttribute Name="Script" Value="leaveBalance=(Long)map.get(personalID);"/>
            </xpdl:ExtendedAttributes>
        </xpdl:Application>
        <xpdl:Application Id="fill_leave_balance_map" Name="Fill leave balance map">
            <xpdl:Description>Initially fills leave balance map</xpdl:Description>
            <xpdl:FormalParameters>
                <xpdl:FormalParameter Id="map" Mode="OUT">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="map"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
            </xpdl:FormalParameters>
            <xpdl:ExtendedAttributes>
                <xpdl:ExtendedAttribute Name="ToolAgentClass" Value="org.enhydra.shark.toolagent.BshToolAgent"/>
                <xpdl:ExtendedAttribute Name="Script" Value="map=new java.util.HashMap();&#10;map.put(&quot;1&quot;,new java.lang.Long(5+(int)(10*java.lang.Math.random())));&#10;map.put(&quot;2&quot;,new java.lang.Long(5+(int)(10*java.lang.Math.random())));&#10;map.put(&quot;3&quot;,new java.lang.Long(5+(int)(10*java.lang.Math.random())));&#10;map.put(&quot;4&quot;,new java.lang.Long(5+(int)(10*java.lang.Math.random())));&#10;map.put(&quot;5&quot;,new java.lang.Long(5+(int)(10*java.lang.Math.random())));&#10;map.put(&quot;6&quot;,new java.lang.Long(5+(int)(10*java.lang.Math.random())));&#10;map.put(&quot;7&quot;,new java.lang.Long(5+(int)(10*java.lang.Math.random())));&#10;map.put(&quot;8&quot;,new java.lang.Long(5+(int)(10*java.lang.Math.random())));&#10;map.put(&quot;9&quot;,new java.lang.Long(5+(int)(10*java.lang.Math.random())));"/>
            </xpdl:ExtendedAttributes>
        </xpdl:Application>
        <xpdl:Application Id="send_mail" Name="Send mail">
            <xpdl:Description>Sends an email to a specific person.</xpdl:Description>
            <xpdl:FormalParameters>
                <xpdl:FormalParameter Id="from_addresses" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="to_addresses" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="subject" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:Description>Mail subject</xpdl:Description>
                </xpdl:FormalParameter>
                <xpdl:FormalParameter Id="content" Mode="IN">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
            </xpdl:FormalParameters>
            <xpdl:ExtendedAttributes>
                <xpdl:ExtendedAttribute Name="ToolAgentClass" Value="org.enhydra.shark.toolagent.MailToolAgent"/>
                <xpdl:ExtendedAttribute Name="AppName" Value="org.enhydra.shark.toolagent.DefaultMailMessageHandler"/>
                <xpdl:ExtendedAttribute Name="AppMode" Value="0"/>
            </xpdl:ExtendedAttributes>
        </xpdl:Application>
        <xpdl:Application Id="fill_reason_for_denial" Name="Fill reason for denial">
            <xpdl:FormalParameters>
                <xpdl:FormalParameter Id="reasonForDenial" Mode="INOUT">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:FormalParameter>
            </xpdl:FormalParameters>
            <xpdl:ExtendedAttributes>
                <xpdl:ExtendedAttribute Name="ToolAgentClass" Value="org.enhydra.shark.toolagent.BshToolAgent"/>
                <xpdl:ExtendedAttribute Name="Script" Value="reasonForDenial=new java.lang.String(&quot;You do not have any leave days in your quota balance&quot;);"/>
            </xpdl:ExtendedAttributes>
        </xpdl:Application>
    </xpdl:Applications>
    <xpdl:WorkflowProcesses>
        <xpdl:WorkflowProcess AccessLevel="PUBLIC" Id="leave_request" Name="Leave Request">
            <xpdl:ProcessHeader DurationUnit="s">
                <xpdl:Created>2010-09-11 08:14:55</xpdl:Created>
                <xpdl:Description>Handles leave request.</xpdl:Description>
                <xpdl:Limit>120</xpdl:Limit>
            </xpdl:ProcessHeader>
            <xpdl:RedefinableHeader PublicationStatus="UNDER_TEST"/>
            <xpdl:DataFields>
                <xpdl:DataField Id="accepted" IsArray="FALSE" Name="Is request accepted?">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>true</xpdl:InitialValue>
                    <xpdl:Description>Determines if request is accepted or not.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="approval_date" IsArray="FALSE" Name="Approval date">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="DATETIME"/>
                    </xpdl:DataType>
                    <xpdl:Description>The date of request is approval.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="approved" IsArray="FALSE" Name="Is request approved?">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                    <xpdl:Description>Determines if request is approved or not.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="personalID" IsArray="FALSE" Name="Personal ID">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:Description>Employee's personal ID.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="balance" IsArray="FALSE">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="default_deadline_time" IsArray="FALSE" Name="Default deadline time">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>30000</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="employee_email_address" IsArray="FALSE" Name="Employee's email address">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:Description>E-Mail address of employee that submits request.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="first_name" IsArray="FALSE" Name="First name">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:Description>Employee's first name.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="last_name" IsArray="FALSE" Name="Last name">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:Description>Employee's last name.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="leave_days" IsArray="FALSE" Name="Leave days">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="leave_from_date" IsArray="FALSE" Name="Leave from date">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="DATETIME"/>
                    </xpdl:DataType>
                    <xpdl:Description>The date when employee would like to leave.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="leave_to_date" IsArray="FALSE" Name="Leave to date">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="DATETIME"/>
                    </xpdl:DataType>
                    <xpdl:Description>The date when employee would like to return back to work.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="reason_for_denial" IsArray="FALSE" Name="Reason for denial">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:Description>If leave request is denied, the reason for denial should be entered.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="reason_for_leave" IsArray="FALSE" Name="Reason for leave">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:Description>The reason why employee has submited leave request.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="supervisor_name" IsArray="FALSE" Name="Supervisor">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:Description>The name of supervisor that is responsible to approve/deny employee's leave request.</xpdl:Description>
                </xpdl:DataField>
                <xpdl:DataField Id="leave_balance_map" IsArray="FALSE" Name="Leave balance map">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="map"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>null</xpdl:InitialValue>
                </xpdl:DataField>
            </xpdl:DataFields>
            <xpdl:Activities>
                <xpdl:Activity Id="submit_leave_request" Name="Submit leave request">
                    <xpdl:Description>The leave request submission.</xpdl:Description>
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performer>employee</xpdl:Performer>
                    <xpdl:Deadline Execution="SYNCHR">
                        <xpdl:DeadlineCondition>var d=new java.util.Date();
d.setTime(ACTIVITY_ACTIVATED_TIME.getTime()+default_deadline_time);
d;</xpdl:DeadlineCondition>
                        <xpdl:ExceptionName>end_process</xpdl:ExceptionName>
                    </xpdl:Deadline>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="XOR">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="leave_request_Tra22"/>
                                    <xpdl:TransitionRef Id="leave_request_tra1"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="11,64"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="employee"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="employee_email_address"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="personalID"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="first_name"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="last_name"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="reason_for_leave"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="leave_from_date"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="leave_to_date"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="review_leave_request" Name="Review leave request">
                    <xpdl:Description>Approve/deny employee's request.</xpdl:Description>
                    <xpdl:Limit>30</xpdl:Limit>
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performer>supervisor</xpdl:Performer>
                    <xpdl:SimulationInformation Instantiation="ONCE">
                        <xpdl:Cost>35</xpdl:Cost>
                        <xpdl:TimeEstimation>
                            <xpdl:WaitingTime>15</xpdl:WaitingTime>
                            <xpdl:WorkingTime>10</xpdl:WorkingTime>
                            <xpdl:Duration>25</xpdl:Duration>
                        </xpdl:TimeEstimation>
                    </xpdl:SimulationInformation>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="XOR">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="leave_request_Tra2"/>
                                    <xpdl:TransitionRef Id="leave_request_Tra13"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="14,217"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="supervisor"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="personalID"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="first_name"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="last_name"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="reason_for_leave"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="leave_from_date"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="leave_to_date"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="approved"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="reason_for_denial"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="approval_date"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="supervisor_name"/>
                        <xpdl:ExtendedAttribute Name="MANAGER_OF_PREVIOUS"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="final_leave_request_review" Name="Review leave request">
                    <xpdl:Description>Approve/deny employee's request.</xpdl:Description>
                    <xpdl:Limit>30</xpdl:Limit>
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performer>personnel_department</xpdl:Performer>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="XOR">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="leave_request_Tra5"/>
                                    <xpdl:TransitionRef Id="leave_request_Tra24"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="14,299"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="personnel_department"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="personalID"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="first_name"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="last_name"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="reason_for_leave"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="leave_from_date"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="leave_to_date"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="approved"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="reason_for_denial"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="approval_date"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="supervisor_name"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="send_mail" Name="Send mail">
                    <xpdl:Description>System sends an email to employee with notification of request approval/denial.</xpdl:Description>
                    <xpdl:Implementation>
                        <xpdl:Tool Id="send_mail" Type="APPLICATION">
                            <xpdl:ActualParameters>
                                <xpdl:ActualParameter>"shark@objectweb.org"</xpdl:ActualParameter>
                                <xpdl:ActualParameter>employee_email_address</xpdl:ActualParameter>
                                <xpdl:ActualParameter>if (approved) { "Your leave request is approved!"} else {"Your leave request is declined!"}</xpdl:ActualParameter>
                                <xpdl:ActualParameter>if (approved) { "Your leave request is approved!"} else {reason_for_denial}</xpdl:ActualParameter>
                            </xpdl:ActualParameters>
                        </xpdl:Tool>
                    </xpdl:Implementation>
                    <xpdl:Performer>system</xpdl:Performer>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="XOR"/>
                            <xpdl:Split Type="XOR">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="leave_request_tra4"/>
                                    <xpdl:TransitionRef Id="leave_request2_tra3"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="13,300"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="system"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="automatic_denial_mail" Name="Automatic denial mail">
                    <xpdl:Description>System sends an email to employee with denial of leave request, because employee does not have leave days in his/her quota balance.</xpdl:Description>
                    <xpdl:Implementation>
                        <xpdl:Tool Id="send_mail" Type="APPLICATION">
                            <xpdl:ActualParameters>
                                <xpdl:ActualParameter>"shark@objectweb.org"</xpdl:ActualParameter>
                                <xpdl:ActualParameter>employee_email_address</xpdl:ActualParameter>
                                <xpdl:ActualParameter>"Your leave request is declined!"</xpdl:ActualParameter>
                                <xpdl:ActualParameter>"Your leave request is declined because you do not have any leave days in your quota balance!"</xpdl:ActualParameter>
                            </xpdl:ActualParameters>
                        </xpdl:Tool>
                    </xpdl:Implementation>
                    <xpdl:Performer>system</xpdl:Performer>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="XOR">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="leave_request_tra3"/>
                                    <xpdl:TransitionRef Id="leave_request2_tra2"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="14,217"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="system"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="check_leave_days" Name="Check leave days">
                    <xpdl:Implementation>
                        <xpdl:Tool Id="get_leave_balance" Type="APPLICATION">
                            <xpdl:ActualParameters>
                                <xpdl:ActualParameter>leave_balance_map</xpdl:ActualParameter>
                                <xpdl:ActualParameter>personalID</xpdl:ActualParameter>
                                <xpdl:ActualParameter>leave_days</xpdl:ActualParameter>
                            </xpdl:ActualParameters>
                        </xpdl:Tool>
                        <xpdl:Tool Id="check_leave_days" Type="APPLICATION">
                            <xpdl:ActualParameters>
                                <xpdl:ActualParameter>leave_from_date</xpdl:ActualParameter>
                                <xpdl:ActualParameter>leave_to_date</xpdl:ActualParameter>
                                <xpdl:ActualParameter>leave_days</xpdl:ActualParameter>
                                <xpdl:ActualParameter>accepted</xpdl:ActualParameter>
                                <xpdl:ActualParameter>balance</xpdl:ActualParameter>
                            </xpdl:ActualParameters>
                        </xpdl:Tool>
                    </xpdl:Implementation>
                    <xpdl:Performer>system</xpdl:Performer>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="XOR">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="leave_request_Tra1"/>
                                    <xpdl:TransitionRef Id="leave_request_Tra3"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="14,135"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="system"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="update_leave_days" Name="Update leave days">
                    <xpdl:Implementation>
                        <xpdl:Tool Id="deduct_leave_balance" Type="APPLICATION">
                            <xpdl:ActualParameters>
                                <xpdl:ActualParameter>leave_balance_map</xpdl:ActualParameter>
                                <xpdl:ActualParameter>personalID</xpdl:ActualParameter>
                                <xpdl:ActualParameter>balance</xpdl:ActualParameter>
                            </xpdl:ActualParameters>
                        </xpdl:Tool>
                    </xpdl:Implementation>
                    <xpdl:Performer>system</xpdl:Performer>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="13,405"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="system"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="deadine_exceeded" Name="Deadine exceeded">
                    <xpdl:Route/>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="employee"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="11,228"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="init_leave_balance_map" Name="Init leave bal. map">
                    <xpdl:Implementation>
                        <xpdl:Tool Id="fill_leave_balance_map">
                            <xpdl:ActualParameters>
                                <xpdl:ActualParameter>leave_balance_map</xpdl:ActualParameter>
                            </xpdl:ActualParameters>
                        </xpdl:Tool>
                    </xpdl:Implementation>
                    <xpdl:Performer>system</xpdl:Performer>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="11,64"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="system"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="leave_request_notification" Name="Leave request notification">
                    <xpdl:Description>Notification about leave request approval through the worklist</xpdl:Description>
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performer>employee</xpdl:Performer>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="XOR"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="employee"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="23,530"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="personalID"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="first_name"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="last_name"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="reason_for_leave"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="leave_from_date"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="leave_to_date"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="reason_for_denial"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="approval_date"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="supervisor_name"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="approved"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="fill_reason_for_denial" Name="Fill reason for denial">
                    <xpdl:Description>System fills the variable "reason_for_denial"</xpdl:Description>
                    <xpdl:Implementation>
                        <xpdl:Tool Id="fill_reason_for_denial">
                            <xpdl:ActualParameters>
                                <xpdl:ActualParameter>reason_for_denial</xpdl:ActualParameter>
                            </xpdl:ActualParameters>
                        </xpdl:Tool>
                    </xpdl:Implementation>
                    <xpdl:Performer>system</xpdl:Performer>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="121,136"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="system"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
                <xpdl:Activity Id="R">
                    <xpdl:Route/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="XOR"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_PARTICIPANT_ID" Value="system"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_OFFSET" Value="119,533"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Activity>
            </xpdl:Activities>
            <xpdl:Transitions>
                <xpdl:Transition From="check_leave_days" Id="leave_request_Tra1" To="review_leave_request">
                    <xpdl:Condition Type="CONDITION">accepted</xpdl:Condition>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_ORTHOGONAL"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="review_leave_request" Id="leave_request_Tra2" To="final_leave_request_review">
                    <xpdl:Condition Type="CONDITION">approved</xpdl:Condition>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_ORTHOGONAL"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="check_leave_days" Id="leave_request_Tra3" To="fill_reason_for_denial">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_ORTHOGONAL"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="final_leave_request_review" Id="leave_request_Tra5" To="update_leave_days">
                    <xpdl:Condition Type="CONDITION">approved</xpdl:Condition>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_BEZIER"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="review_leave_request" Id="leave_request_Tra13" To="send_mail">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_BREAK_POINTS" Value="375,257"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_BEZIER"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="submit_leave_request" Id="leave_request_Tra22" To="check_leave_days">
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_ORTHOGONAL"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="update_leave_days" Id="leave_request_Tra23" To="send_mail">
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_ORTHOGONAL"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="final_leave_request_review" Id="leave_request_Tra24" To="send_mail">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_BEZIER"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="submit_leave_request" Id="leave_request_tra1" To="deadine_exceeded">
                    <xpdl:Condition Type="DEFAULTEXCEPTION"/>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_BEZIER"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="init_leave_balance_map" Id="leave_request2_tra1" To="submit_leave_request">
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_SPLINE"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="automatic_denial_mail" Id="leave_request2_tra2" To="R">
                    <xpdl:Condition Type="DEFAULTEXCEPTION"/>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_BREAK_POINTS" Value="629,451"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_SPLINE"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="send_mail" Id="leave_request2_tra3" To="R">
                    <xpdl:Condition Type="DEFAULTEXCEPTION"/>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_BREAK_POINTS" Value="585,433"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_SPLINE"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="fill_reason_for_denial" Id="leave_request_tra2" To="automatic_denial_mail">
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_SPLINE"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="automatic_denial_mail" Id="leave_request_tra3" To="leave_request_notification">
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_BREAK_POINTS" Value="636,414-674,545"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_SPLINE"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="send_mail" Id="leave_request_tra4" To="leave_request_notification">
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_BREAK_POINTS" Value="567,443"/>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_SPLINE"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
                <xpdl:Transition From="R" Id="leave_request_tra5" To="leave_request_notification">
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="JaWE_GRAPH_TRANSITION_STYLE" Value="NO_ROUTING_SPLINE"/>
                    </xpdl:ExtendedAttributes>
                </xpdl:Transition>
            </xpdl:Transitions>
            <xpdl:ExtendedAttributes>
                <xpdl:ExtendedAttribute Name="JaWE_GRAPH_WORKFLOW_PARTICIPANT_ORIENTATION" Value="VERTICAL"/>
                <xpdl:ExtendedAttribute Name="JaWE_GRAPH_WORKFLOW_PARTICIPANT_ORDER" Value="employee;supervisor;personnel_department;system"/>
                <xpdl:ExtendedAttribute Name="JaWE_GRAPH_START_OF_WORKFLOW" Value="JaWE_GRAPH_PARTICIPANT_ID=system,CONNECTING_ACTIVITY_ID=init_leave_balance_map,X_OFFSET=164,Y_OFFSET=75,JaWE_GRAPH_TRANSITION_STYLE=NO_ROUTING_ORTHOGONAL,TYPE=START_DEFAULT"/>
                <xpdl:ExtendedAttribute Name="JaWE_GRAPH_END_OF_WORKFLOW" Value="JaWE_GRAPH_PARTICIPANT_ID=employee,CONNECTING_ACTIVITY_ID=leave_request_notification,X_OFFSET=49,Y_OFFSET=633,JaWE_GRAPH_TRANSITION_STYLE=NO_ROUTING_ORTHOGONAL,TYPE=END_DEFAULT"/>
                <xpdl:ExtendedAttribute Name="RESET_VARIABLES" Value="approved"/>
                <xpdl:ExtendedAttribute Name="JaWE_GRAPH_END_OF_WORKFLOW" Value="JaWE_GRAPH_PARTICIPANT_ID=employee,CONNECTING_ACTIVITY_ID=deadine_exceeded,X_OFFSET=37,Y_OFFSET=321,JaWE_GRAPH_TRANSITION_STYLE=NO_ROUTING_ORTHOGONAL,TYPE=END_DEFAULT"/>
            </xpdl:ExtendedAttributes>
        </xpdl:WorkflowProcess>
    </xpdl:WorkflowProcesses>
    <xpdl:ExtendedAttributes>
        <xpdl:ExtendedAttribute Name="JaWE_CONFIGURATION" Value="shark"/>
        <xpdl:ExtendedAttribute Name="EDITING_TOOL" Value="Together Workflow Editor"/>
        <xpdl:ExtendedAttribute Name="EDITING_TOOL_VERSION" Value="3.2-2-C-20100831-0848"/>
    </xpdl:ExtendedAttributes>
</xpdl:Package>
